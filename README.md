# Napcat登录插件

这是一个基于YunzaiBot的插件，用于用户绑定QQ号实现Napcat的登录和关闭。

## 功能

- 绑定QQ号与Napcat账号
- 通过QQ指令登录Napcat
- 通过QQ指令关闭Napcat
- 查看绑定状态

## 安装

1. 将本插件放置在YunzaiBot的plugins目录下
2. 重启YunzaiBot

## 使用方法

> **注意：** 所有命令仅限机器人主人使用

### 基础命令

- `#napcat测试` - 测试 SSH 连接是否正常
- `#napcat帮助` - 显示帮助信息

### 状态管理

- `#napcat状态` - 查看所有 Napcat 实例状态
- `#napcat状态 123456789` - 查看指定 QQ 号的 Napcat 状态

### 启动与停止

- `#napcat启动 123456789` - 启动指定 QQ 号的 Napcat
- `#napcat停止 123456789` - 停止指定 QQ 号的 Napcat
- `#napcat停止` - 停止所有 Napcat 实例
- `#napcat重启 123456789` - 重启指定 QQ 号的 Napcat

### 日志查看

- `#napcat日志 123456789` - 实时查看指定 QQ 号的 Napcat 日志（持续 60 秒）
- `#取消日志` - 手动取消日志查看

### 更新

- `#napcat更新` - 更新 Napcat 程序

## 注意事项

1. **权限控制**：所有命令仅限机器人主人使用，非主人用户将收到拒绝消息。

2. **SSH 连接**：确保 SSH 服务器允许密码认证或密钥认证，并且防火墙已开放相应端口。

3. **日志查看**：
   - 日志查看功能会持续 60 秒，之后自动关闭
   - 可以使用 `#取消日志` 命令手动停止日志查看
   - 日志查看期间，SSH 连接会保持打开状态

4. **服务器要求**：
   - 服务器上必须已安装 Napcat
   - 用户需要有执行 Napcat 命令的权限

5. **资源占用**：
   - 实时日志功能会占用一定的网络资源
   - 长时间使用可能会影响机器人性能

## 故障排除

1. **SSH 连接失败**：
   - 检查 SSH 配置信息是否正确
   - 确认服务器 SSH 服务是否正常运行
   - 检查防火墙设置

2. **命令执行失败**：
   - 确认服务器上已安装 Napcat
   - 检查 SSH 用户是否有执行 Napcat 命令的权限

3. **日志显示问题**：
   - 如果日志显示不完整，可能是因为日志量太大
   - 尝试使用 `#napcat状态` 命令先检查状态

## 更新日志

### v1.0.0
- 初始版本发布
- 支持基本的 Napcat 管理功能
- 实现实时日志查看

## 开发计划

- [ ] 添加更多日志过滤选项
- [ ] 支持自定义日志查看时间
- [ ] 添加定时任务功能
- [ ] 优化日志显示格式

## 许可证

MIT License 